<!DOCTYPE html>
<html>
    <head>
        <title>rock paper secissor using DOM</title>
    </head>
    <body>
        <p>
            Rock paper Scissors
        </p>
        <button onclick="
            funResult('Rock');
        ">Rock</button>
        <button onclick="
            funResult('paper');
        ">paper</button>
        <button onclick="
            funResult('scissor');
        ">scissors</button>

        <p class="js-wl"></p>

        <p class="js-moves"></p>

        <p class="js-score"></p>

        <button onclick="
            score.win=0;
            score.lose=0;
            score.ties=0;
            localStorage.removeItem('score');

            updateScore();

            alert('Score is resetd you can start ')
        ">Rest Score</button>



        <script>
            let score=JSON.parse(localStorage.getItem('score')) || {
                win:0,
                lose:0,
                ties:0
            };


            updateScore();
            
            function updateScore(){
                document.querySelector('.js-score').innerHTML=`Wins: ${score.win} Lose: ${score.lose} Ties: ${score.ties}`;
            }
            

            function winLose(result){
                document.querySelector('.js-wl').innerHTML=`you ${result}.`;
            }

            function upadteMoves(playerMove,computerM){
                document.querySelector('.js-moves').innerHTML=`your move ${playerMove} - Computer move ${computerM}`
            }

            function function1(){
                const randomN=Math.random();
                let computerM='';
                if (randomN>=0 && randomN <= 1/3){
                    computerM='Rock';
                }else if(randomN>= 1/3 && randomN<= 2/3){
                    computerM='paper';
                }else{
                    computerM='scissors';
                }
                return computerM;
            }
            function funResult(playermove){
                 const computerM=function1();
                 let result='';
                 if (playermove==='Rock'){
                    if (computerM===playermove){
                        result='Tie';
                    }else if(computerM==='paper'){
                        result='win';
                    }else{
                        result='lose';
                    }

                 }else if(playermove==='paper'){
                    if(computerM===playermove){
                        result='tie';
                    }else if(computerM==='Rock'){
                        result='win';
                    }else{
                        result='lose';
                    }
                    
                 }else{
                    if(computerM===playermove){
                        result='tie';
                    }else if(computerM==='paper'){
                        result='win';
                    }else{
                        result='lose';
                    }
                 }
                 if (result ==='win'){
                    score.win+=1;
                 }else if(result==='lose'){
                    score.lose+=1;
                 }else{
                    score.ties+=1;
                 }

                 localStorage.setItem('score',JSON.stringify(score));


                 winLose(result);

                 upadteMoves(playermove,computerM);

                 updateScore();

                 
            }

        </script>
    </body>
</html>